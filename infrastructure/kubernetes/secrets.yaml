# Open Forge Global Secrets
# Sensitive configuration - Use external-secrets-operator in production
---
apiVersion: v1
kind: Secret
metadata:
  name: open-forge-secrets
  labels:
    app.kubernetes.io/name: open-forge
    app.kubernetes.io/part-of: open-forge
  annotations:
    # External Secrets Operator - uncomment and configure for production
    # external-secrets.io/managed: "true"
    description: "Template secret - replace with ExternalSecret in production"
type: Opaque
stringData:
  # Database URLs
  database-url: "postgresql://openforge:CHANGE_ME@postgres:5432/openforge"
  redis-url: "redis://redis:6379/0"

  # JWT and Auth
  jwt-secret: "CHANGE_ME_IN_PRODUCTION_USE_32_CHARS_MIN"
  nextauth-secret: "CHANGE_ME_IN_PRODUCTION_USE_32_CHARS_MIN"

  # AI Provider API Keys (optional)
  openai-api-key: ""
  anthropic-api-key: ""

  # MinIO Credentials
  minio-access-key: "minio"
  minio-secret-key: "CHANGE_ME_IN_PRODUCTION"
---
# External Secrets template for production use
# Uncomment and configure for your secret management solution
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: open-forge-secrets
#   labels:
#     app.kubernetes.io/name: open-forge
#     app.kubernetes.io/part-of: open-forge
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     kind: ClusterSecretStore
#     name: vault-backend  # or aws-secrets-manager, gcp-secret-manager, etc.
#   target:
#     name: open-forge-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: database-url
#       remoteRef:
#         key: open-forge/database
#         property: url
#     - secretKey: redis-url
#       remoteRef:
#         key: open-forge/redis
#         property: url
#     - secretKey: jwt-secret
#       remoteRef:
#         key: open-forge/auth
#         property: jwt-secret
#     - secretKey: nextauth-secret
#       remoteRef:
#         key: open-forge/auth
#         property: nextauth-secret
#     - secretKey: openai-api-key
#       remoteRef:
#         key: open-forge/ai
#         property: openai-api-key
#     - secretKey: anthropic-api-key
#       remoteRef:
#         key: open-forge/ai
#         property: anthropic-api-key
#     - secretKey: minio-access-key
#       remoteRef:
#         key: open-forge/minio
#         property: access-key
#     - secretKey: minio-secret-key
#       remoteRef:
#         key: open-forge/minio
#         property: secret-key
